<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Theater Overview</title>

    <link rel="icon" type="image/jpg" href="../../static/imgs/favicon.jpg"/>
    <link type="text/css" rel="stylesheet" href="../../static/css/style.css">
</head>

<body>
<div class="outer">
    <div class="inner">
        <span class="title">Theater Overview</span>
        <div class="space-large"></div>
        <form action="/theater_overview" method="POST">
            <span class="text">Movie Name (Include):</span>
            <input name="movie_name">
            <span class="text">Movie Duration:</span>
            <input name="min_duration">
            <span class="text">--</span>
            <input name="max_duration"> </br>
            <span class="text">Movie Release Date:</span>
            <input name="min_release_date">
            <span class="text">--</span>
            <input name="max_release_date"> </br>
            <span class="text">Movie Play Date:</span>
            <input name="min_play_date">
            <span class="text">--</span>
            <input name="max_play_date"> </br>
            <input type="checkbox" name="not_played_movie_only" value="True"> Only Include Not Played Movies</br>
            <button type="submit">Filter</button> </br>
        </form>
        <div id="output"></div>
        <button type="button" onclick="window.location.href='manager-customer.html'">Back</button>
    </div>
</div>
</body>
</html>
<script type="text/javascript">
  var uri = "https://w3schools.com/my test.asp?name=stÃ¥le&car=saab";
  function generateTableHead(table, data) {
	let thead = table.createTHead();
	let row = thead.insertRow();
	for (let key of data) {
	  let th = document.createElement("th");
	  let text = document.createTextNode(key);
	  th.appendChild(text);
	  row.appendChild(th);
	}
  }
  function generateTable(table, data) {
	for (let element of data) {
	  let row = table.insertRow();
	  for (key in element) {
		let cell = row.insertCell();
		let text = document.createTextNode(element[key]);
		cell.appendChild(text);
	  }
	}
  }
  var parameters = decodeURIComponent(location.search.substring(1));
  if (parameters.length>0) {
	var results = JSON.parse(parameters);
	console.log(results);
	document.getElementById("output").innerHTML = "<table style=\"width:100%\">\n" +
      "  <tr>\n" +
      "    <th>Movie Name</th>\n" +
      "    <th>Duration</th> \n" +
      "    <th>Release Date</th>\n" +
      "    <th>Play Date</th>\n" +
      "  </tr>\n";

    /*for (var i = 0; i < results.length; i++) {
        document.getElementById("output").innerHTML += "<tr>\n" +
          "    <td>"+results[i].movName+"</td>\n" +
          "    <td>"+results[i].movDuration+"</td>\n" +
          "    <td>"+results[i].movReleaseDate+"</td>\n" +
          "    <td>"+results[i].movPlayDate+"</td>\n" +
          "  </tr></br>\n";
    }*/
    document.getElementById("output").innerHTML += "</table>";
	let table = document.querySelector("table");
	console.log(table);
	let data = Object.keys(results[0]);
	generateTable(table, results);
  }
</script>
